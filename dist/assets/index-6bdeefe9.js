import{d as q,x as F,f as M,r as _,y as N,S as C,K as R,a as r,o as B,c as K,U as L,e as t,O as u,i as a,l as p,t as A,V as D,W as O,b as $,X as z,Y as H,p as W,q as X,Z as Y,_ as Z}from"./index-f83309f8.js";import{t as j}from"./index-989115b7.js";import{h as g}from"./index-2a3f9cb3.js";import{g as V}from"./getEnv-c7d7dbdb.js";function G(n){return g.post("/admin/login",n)}function J(){return g.get("/admin/login/captcha")}function Q(){return g.get("/admin/info")}const E=n=>(W("data-v-611ea6b7"),n=n(),X(),n),ee={class:"login-container"},te=E(()=>p("div",{style:{color:"transparent"}},"左侧区域占位符",-1)),oe={class:"form-header"},ae=E(()=>p("div",{class:"title"},"hello !",-1)),se={class:"title-tips"},le=q({__name:"index",setup(n){const I=F(),U=M(),h=_(),v=N(),l=C({username:"user",password:"123456",captchaKey:"",captchaCode:""}),m=_(!1),S=C({username:[{required:!0,validator:(s,e,o)=>{e===""?o(new Error("用户名不能为空")):e.length<4?o(new Error("用户名长度不能小于4位")):o()}}],password:[{required:!0,validator:(s,e,o)=>{e===""?o(new Error("密码不能为空")):e.length<6?o(new Error("密码长度不能小于6位")):o()}}],captchaCode:[{required:!0,validator:(s,e,o)=>{e===""?o(new Error("验证码不能为空")):o()}}]}),w=_({image:"",key:""}),y=async()=>{try{const{data:s}=await J();w.value=s,l.captchaKey=s.key}catch(s){console.log(s)}},T=s=>{s&&s.validate(async e=>{if(e)try{m.value=!0;const{data:o}=await G(l);v.setToken(o),I.replace(U.query.redirect||z);const i=await Q();v.setUserInfo(i.data),H({title:`hi,${j()}!`,message:"欢迎回来",type:"success"})}finally{m.value=!1}})};return R(()=>{y()}),(s,e)=>{const o=r("el-alert"),i=r("el-col"),f=r("el-input"),c=r("el-form-item"),P=r("el-image"),x=r("el-row"),b=r("el-button"),k=r("el-form");return B(),K("div",ee,[L(t(o,{title:u(V)("VITE_APP_TITLE"),type:"success",closable:!1,style:{position:"fixed"}},null,8,["title"]),[[Y,!1]]),t(x,null,{default:a(()=>[t(i,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[te]),_:1}),t(i,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t(k,{ref_key:"ruleFormRef",ref:h,model:l,"status-icon":"",rules:S,class:"login-form"},{default:a(()=>[p("div",oe,[ae,p("div",se," 欢迎来到"+A(u(V)("VITE_APP_TITLE"))+"！ ",1)]),t(c,{prop:"username"},{default:a(()=>[t(f,{modelValue:l.username,"onUpdate:modelValue":e[0]||(e[0]=d=>l.username=d),modelModifiers:{trim:!0},"prefix-icon":u(D),autocomplete:"off",placeholder:"请输入用户名"},null,8,["modelValue","prefix-icon"])]),_:1}),t(c,{prop:"password"},{default:a(()=>[t(f,{modelValue:l.password,"onUpdate:modelValue":e[1]||(e[1]=d=>l.password=d),modelModifiers:{trim:!0},type:"password","show-password":"","prefix-icon":u(O),autocomplete:"off",placeholder:"请输入密码"},null,8,["modelValue","prefix-icon"])]),_:1}),t(c,{prop:"captchaCode"},{default:a(()=>[t(x,null,{default:a(()=>[t(i,{span:15},{default:a(()=>[t(f,{modelValue:l.captchaCode,"onUpdate:modelValue":e[2]||(e[2]=d=>l.captchaCode=d),modelModifiers:{trim:!0},autocomplete:"off",placeholder:"请输入验证码"},null,8,["modelValue"])]),_:1}),t(i,{span:8,offset:1},{default:a(()=>[t(P,{fit:"contain",style:{height:"100%",background:"white"},class:"pointer",src:w.value.image,onClick:y},null,8,["src"])]),_:1})]),_:1})]),_:1}),t(c,null,{default:a(()=>[t(b,{class:"login-btn",type:"primary",size:"large",loading:m.value,onClick:e[3]||(e[3]=d=>T(h.value))},{default:a(()=>[$(" 登陆 ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1})])}}});const me=Z(le,[["__scopeId","data-v-611ea6b7"]]);export{me as default};
